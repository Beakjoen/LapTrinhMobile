<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seed Data - Restaurant App</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        .content {
            padding: 30px;
        }
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 20px;
            border-radius: 4px;
            margin-bottom: 30px;
        }
        .info-box h3 {
            color: #1976D2;
            margin-bottom: 10px;
        }
        .info-box ul {
            margin-left: 20px;
            line-height: 1.8;
        }
        .config-note {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 15px;
            font-size: 14px;
            color: #856404;
        }
        button {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            margin-bottom: 20px;
        }
        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
        .log {
            margin-top: 20px;
            padding: 20px;
            background: #1e1e1e;
            border-radius: 8px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
        }
        .log-item {
            margin-bottom: 8px;
            word-wrap: break-word;
        }
        .log-success { color: #4CAF50; }
        .log-error { color: #f44336; }
        .log-info { color: #2196F3; }
        .log-warning { color: #ff9800; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Seed Data v√†o Firestore</h1>
            <p>Kh·ªüi t·∫°o d·ªØ li·ªáu m·∫´u cho ·ª©ng d·ª•ng Qu·∫£n l√Ω Nh√† h√†ng</p>
        </div>
        
        <div class="content">
            <div class="info-box">
                <h3>üìã Th√¥ng tin</h3>
                <ul>
                    <li>Script s·∫Ω th√™m <strong>4 customers</strong>, <strong>18 menu items</strong> v√† <strong>3 reservations</strong></li>
                    <li>Config Firebase ƒë√£ ƒë∆∞·ª£c ƒëi·ªÅn s·∫µn t·ª´ project c·ªßa b·∫°n</li>
                    <li>Click n√∫t b√™n d∆∞·ªõi ƒë·ªÉ seed d·ªØ li·ªáu</li>
                </ul>
            </div>

            <div class="config-note">
                üí° Config Firebase ƒë√£ ƒë∆∞·ª£c ƒëi·ªÅn s·∫µn t·ª´ firebase_options.dart. N·∫øu b·∫°n d√πng project kh√°c, vui l√≤ng ch·ªânh s·ª≠a trong code.
            </div>

            <button id="seedBtn" onclick="runSeedData()">üå± Seed D·ªØ Li·ªáu</button>

            <div class="log" id="log"></div>
        </div>
    </div>

    <script>
        // Firebase config t·ª´ firebase_options.dart
        const firebaseConfig = {
            apiKey: "AIzaSyCjM3ECahBp40_ZHLln2ofvOjZF8_8yu8o",
            authDomain: "restaurant-app-1771020358.firebaseapp.com",
            projectId: "restaurant-app-1771020358",
            storageBucket: "restaurant-app-1771020358.firebasestorage.app",
            messagingSenderId: "349120585515",
            appId: "1:349120585515:web:default"
        };

        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const logItem = document.createElement('div');
            logItem.className = `log-item log-${type}`;
            logItem.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logDiv.appendChild(logItem);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        async function runSeedData() {
            const btn = document.getElementById('seedBtn');
            btn.disabled = true;
            btn.textContent = '‚è≥ ƒêang x·ª≠ l√Ω...';
            document.getElementById('log').innerHTML = '';

            try {
                log('üîÑ ƒêang kh·ªüi t·∫°o Firebase...', 'info');
                
                let app;
                try {
                    app = firebase.app();
                    log('‚úÖ Firebase ƒë√£ ƒë∆∞·ª£c kh·ªüi t·∫°o', 'info');
                } catch (e) {
                    app = firebase.initializeApp(firebaseConfig);
                    log('‚úÖ ƒê√£ kh·ªüi t·∫°o Firebase th√†nh c√¥ng!', 'success');
                }
                
                const db = firebase.firestore();
                log('‚úÖ ƒê√£ k·∫øt n·ªëi Firestore!', 'success');

                // 1. SEED CUSTOMERS
                log('\nüìù ƒêang seed customers...', 'info');
                const customers = [
                    {
                        email: 'nguyenvana@example.com',
                        fullName: 'Nguy·ªÖn VƒÉn A',
                        phoneNumber: '0123456789',
                        address: '123 ƒê∆∞·ªùng ABC, Qu·∫≠n 1, TP.HCM',
                        preferences: ['vegetarian', 'spicy'],
                        loyaltyPoints: 0,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        isActive: true,
                    },
                    {
                        email: 'tranthib@example.com',
                        fullName: 'Tr·∫ßn Th·ªã B',
                        phoneNumber: '0987654321',
                        address: '456 ƒê∆∞·ªùng XYZ, Qu·∫≠n 2, TP.HCM',
                        preferences: ['seafood'],
                        loyaltyPoints: 500,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        isActive: true,
                    },
                    {
                        email: 'levanc@example.com',
                        fullName: 'L√™ VƒÉn C',
                        phoneNumber: '0912345678',
                        address: '789 ƒê∆∞·ªùng DEF, Qu·∫≠n 3, TP.HCM',
                        preferences: ['spicy'],
                        loyaltyPoints: 1200,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        isActive: true,
                    },
                    {
                        email: 'phamthid@example.com',
                        fullName: 'Ph·∫°m Th·ªã D',
                        phoneNumber: '0923456789',
                        address: '321 ƒê∆∞·ªùng GHI, Qu·∫≠n 4, TP.HCM',
                        preferences: ['vegetarian'],
                        loyaltyPoints: 300,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        isActive: true,
                    },
                ];

                const customerIds = [];
                const customerBatch = db.batch();
                for (const customer of customers) {
                    const docRef = db.collection('customers').doc();
                    customerIds.push(docRef.id);
                    customerBatch.set(docRef, customer);
                }
                await customerBatch.commit();
                log(`‚úÖ ƒê√£ seed ${customers.length} customers`, 'success');

                // 2. SEED MENU ITEMS
                log('\nüìù ƒêang seed menu items...', 'info');
                const menuItems = [
                    { name: 'G·ªèi Cu·ªën', description: 'G·ªèi cu·ªën t√¥m th·ªãt t∆∞∆°i ngon v·ªõi b√°nh tr√°ng v√† rau s·ªëng', category: 'Appetizer', price: 35000, imageUrl: '', ingredients: ['b√°nh tr√°ng', 't√¥m', 'th·ªãt', 'rau s·ªëng', 'b√∫n', 'n∆∞·ªõc m·∫Øm'], isVegetarian: false, isSpicy: false, preparationTime: 10, isAvailable: true, rating: 4.7, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'Ch·∫£ Gi√≤', description: 'Ch·∫£ gi√≤ gi√≤n r·ª•m, nh√¢n th·ªãt heo v√† t√¥m', category: 'Appetizer', price: 40000, imageUrl: '', ingredients: ['b√°nh tr√°ng', 'th·ªãt heo', 't√¥m', 'n·∫•m', 'c√† r·ªët'], isVegetarian: false, isSpicy: false, preparationTime: 15, isAvailable: true, rating: 4.5, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'G·ªèi ƒêu ƒê·ªß', description: 'G·ªèi ƒëu ƒë·ªß chua ng·ªçt, t∆∞∆°i m√°t', category: 'Appetizer', price: 30000, imageUrl: '', ingredients: ['ƒëu ƒë·ªß', 't√¥m kh√¥', 'rau th∆°m', 'ƒë·∫≠u ph·ªông', 'n∆∞·ªõc m·∫Øm'], isVegetarian: false, isSpicy: true, preparationTime: 8, isAvailable: true, rating: 4.3, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'Ph·ªü B√≤', description: 'Ph·ªü b√≤ truy·ªÅn th·ªëng Vi·ªát Nam v·ªõi n∆∞·ªõc d√πng ƒë·∫≠m ƒë√†, th·ªãt b√≤ t√°i', category: 'Main Course', price: 50000, imageUrl: '', ingredients: ['b√°nh ph·ªü', 'th·ªãt b√≤', 'h√†nh', 'rau th∆°m', 'chanh', '·ªõt'], isVegetarian: false, isSpicy: false, preparationTime: 15, isAvailable: true, rating: 4.5, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'Ph·ªü G√†', description: 'Ph·ªü g√† th∆°m ngon, n∆∞·ªõc d√πng trong, th·ªãt g√† m·ªÅm', category: 'Main Course', price: 45000, imageUrl: '', ingredients: ['b√°nh ph·ªü', 'th·ªãt g√†', 'h√†nh', 'rau th∆°m', 'chanh'], isVegetarian: false, isSpicy: false, preparationTime: 12, isAvailable: true, rating: 4.3, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'B√∫n B√≤ Hu·∫ø', description: 'B√∫n b√≤ Hu·∫ø cay n·ªìng ƒë·∫≠m ƒë√†, ƒë·∫∑c tr∆∞ng mi·ªÅn Trung', category: 'Main Course', price: 55000, imageUrl: '', ingredients: ['b√∫n', 'th·ªãt b√≤', 'ch·∫£', 'rau th∆°m', '·ªõt', 's·∫£'], isVegetarian: false, isSpicy: true, preparationTime: 20, isAvailable: true, rating: 4.8, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'B√∫n Ch·∫£', description: 'B√∫n ch·∫£ H√† N·ªôi v·ªõi th·ªãt n∆∞·ªõng th∆°m l·ª´ng', category: 'Main Course', price: 60000, imageUrl: '', ingredients: ['b√∫n', 'th·ªãt n∆∞·ªõng', 'rau s·ªëng', 'n∆∞·ªõc m·∫Øm pha'], isVegetarian: false, isSpicy: false, preparationTime: 18, isAvailable: true, rating: 4.6, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'C∆°m T·∫•m', description: 'C∆°m t·∫•m s∆∞·ªùn n∆∞·ªõng, b√¨, ch·∫£ tr·ª©ng', category: 'Main Course', price: 55000, imageUrl: '', ingredients: ['c∆°m t·∫•m', 's∆∞·ªùn n∆∞·ªõng', 'b√¨', 'ch·∫£ tr·ª©ng', 'ƒë·ªì chua'], isVegetarian: false, isSpicy: false, preparationTime: 15, isAvailable: true, rating: 4.4, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'B√°nh M√¨ Th·ªãt N∆∞·ªõng', description: 'B√°nh m√¨ gi√≤n v·ªõi th·ªãt n∆∞·ªõng, pate, ch·∫£ l·ª•a', category: 'Main Course', price: 35000, imageUrl: '', ingredients: ['b√°nh m√¨', 'th·ªãt n∆∞·ªõng', 'pate', 'ch·∫£ l·ª•a', 'rau', 'ƒë·ªì chua'], isVegetarian: false, isSpicy: false, preparationTime: 5, isAvailable: true, rating: 4.5, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'Canh Chua C√°', description: 'Canh chua c√° l√≥c chua ng·ªçt, ƒë·∫≠m ƒë√†', category: 'Soup', price: 60000, imageUrl: '', ingredients: ['c√° l√≥c', 'c√† chua', 'd·ª©a', 'ƒë·∫≠u b·∫Øp', 'rau th∆°m', 'me'], isVegetarian: false, isSpicy: false, preparationTime: 25, isAvailable: true, rating: 4.4, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'Canh Kh·ªï Qua', description: 'Canh kh·ªï qua nh·ªìi th·ªãt, thanh m√°t', category: 'Soup', price: 50000, imageUrl: '', ingredients: ['kh·ªï qua', 'th·ªãt heo', 'n·∫•m', 'h√†nh'], isVegetarian: false, isSpicy: false, preparationTime: 30, isAvailable: true, rating: 4.2, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'Ch√® ƒê·∫≠u Xanh', description: 'Ch√® ƒë·∫≠u xanh m√°t l·∫°nh, ng·ªçt thanh', category: 'Dessert', price: 20000, imageUrl: '', ingredients: ['ƒë·∫≠u xanh', 'ƒë∆∞·ªùng', 'd·ª´a', 'ƒë√°'], isVegetarian: true, isSpicy: false, preparationTime: 5, isAvailable: true, rating: 4.2, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'Ch√® Ba M√†u', description: 'Ch√® ba m√†u ƒë·∫≠m ƒë√†, nhi·ªÅu l·ªõp', category: 'Dessert', price: 25000, imageUrl: '', ingredients: ['ƒë·∫≠u xanh', 'ƒë·∫≠u ƒë·ªè', 'th·∫°ch', 'n∆∞·ªõc c·ªët d·ª´a', 'ƒë√°'], isVegetarian: true, isSpicy: false, preparationTime: 5, isAvailable: true, rating: 4.5, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'B√°nh Flan', description: 'B√°nh flan m·ªÅm m·ªãn, th∆°m ngon', category: 'Dessert', price: 30000, imageUrl: '', ingredients: ['tr·ª©ng', 's·ªØa', 'ƒë∆∞·ªùng', 'caramel'], isVegetarian: true, isSpicy: false, preparationTime: 3, isAvailable: true, rating: 4.6, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'C√† Ph√™ S·ªØa ƒê√°', description: 'C√† ph√™ s·ªØa ƒë√° ƒë·∫≠m ƒë√† phong c√°ch Vi·ªát Nam', category: 'Beverage', price: 25000, imageUrl: '', ingredients: ['c√† ph√™', 's·ªØa ƒë·∫∑c', 'ƒë√°'], isVegetarian: true, isSpicy: false, preparationTime: 3, isAvailable: true, rating: 4.6, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'C√† Ph√™ ƒêen ƒê√°', description: 'C√† ph√™ ƒëen ƒë√° nguy√™n ch·∫•t', category: 'Beverage', price: 20000, imageUrl: '', ingredients: ['c√† ph√™', 'ƒë√°'], isVegetarian: true, isSpicy: false, preparationTime: 3, isAvailable: true, rating: 4.4, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'N∆∞·ªõc Cam √âp', description: 'N∆∞·ªõc cam √©p t∆∞∆°i, gi√†u vitamin C', category: 'Beverage', price: 30000, imageUrl: '', ingredients: ['cam t∆∞∆°i', 'ƒë√°', 'ƒë∆∞·ªùng'], isVegetarian: true, isSpicy: false, preparationTime: 5, isAvailable: true, rating: 4.5, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                    { name: 'Sinh T·ªë B∆°', description: 'Sinh t·ªë b∆° b√©o ng·∫≠y, m√°t l·∫°nh', category: 'Beverage', price: 35000, imageUrl: '', ingredients: ['b∆°', 's·ªØa', 'ƒë√°', 's·ªØa ƒë·∫∑c'], isVegetarian: true, isSpicy: false, preparationTime: 5, isAvailable: true, rating: 4.7, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
                ];

                const menuItemIds = [];
                const menuBatch = db.batch();
                for (const item of menuItems) {
                    const docRef = db.collection('menu_items').doc();
                    menuItemIds.push(docRef.id);
                    menuBatch.set(docRef, item);
                }
                await menuBatch.commit();
                log(`‚úÖ ƒê√£ seed ${menuItems.length} menu items`, 'success');

                // 3. SEED RESERVATIONS
                log('\nüìù ƒêang seed reservations...', 'info');
                if (customerIds.length > 0 && menuItemIds.length > 0) {
                    const now = new Date();
                    const tomorrow = new Date(now);
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    tomorrow.setHours(18, 0, 0, 0);

                    const dayAfter = new Date(now);
                    dayAfter.setDate(dayAfter.getDate() + 2);
                    dayAfter.setHours(19, 30, 0, 0);

                    const yesterday = new Date(now);
                    yesterday.setDate(yesterday.getDate() - 1);
                    yesterday.setHours(12, 0, 0, 0);

                    const reservations = [
                        {
                            customerId: customerIds[0],
                            reservationDate: firebase.firestore.Timestamp.fromDate(tomorrow),
                            numberOfGuests: 2,
                            tableNumber: null,
                            status: 'pending',
                            specialRequests: 'B√†n g·∫ßn c·ª≠a s·ªï',
                            orderItems: [],
                            subtotal: 0,
                            serviceCharge: 0,
                            discount: 0,
                            total: 0,
                            paymentMethod: null,
                            paymentStatus: 'pending',
                            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                        },
                        {
                            customerId: customerIds[0],
                            reservationDate: firebase.firestore.Timestamp.fromDate(dayAfter),
                            numberOfGuests: 4,
                            tableNumber: 'T05',
                            status: 'confirmed',
                            specialRequests: 'Y√™u c·∫ßu b√†n l·ªõn',
                            orderItems: [
                                { itemId: menuItemIds[0], itemName: 'G·ªèi Cu·ªën', quantity: 2, price: 35000, subtotal: 70000 },
                                { itemId: menuItemIds[3], itemName: 'Ph·ªü B√≤', quantity: 2, price: 50000, subtotal: 100000 },
                                { itemId: menuItemIds[15], itemName: 'C√† Ph√™ S·ªØa ƒê√°', quantity: 2, price: 25000, subtotal: 50000 },
                            ],
                            subtotal: 220000,
                            serviceCharge: 22000,
                            discount: 0,
                            total: 242000,
                            paymentMethod: null,
                            paymentStatus: 'pending',
                            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                        },
                        {
                            customerId: customerIds[0],
                            reservationDate: firebase.firestore.Timestamp.fromDate(yesterday),
                            numberOfGuests: 3,
                            tableNumber: 'T12',
                            status: 'completed',
                            specialRequests: null,
                            orderItems: [
                                { itemId: menuItemIds[5], itemName: 'B√∫n B√≤ Hu·∫ø', quantity: 3, price: 55000, subtotal: 165000 },
                                { itemId: menuItemIds[12], itemName: 'Ch√® ƒê·∫≠u Xanh', quantity: 3, price: 20000, subtotal: 60000 },
                            ],
                            subtotal: 225000,
                            serviceCharge: 22500,
                            discount: 10000,
                            total: 237500,
                            paymentMethod: 'card',
                            paymentStatus: 'paid',
                            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                        },
                    ];

                    const reservationBatch = db.batch();
                    for (const reservation of reservations) {
                        const docRef = db.collection('reservations').doc();
                        reservationBatch.set(docRef, reservation);
                    }
                    await reservationBatch.commit();
                    log(`‚úÖ ƒê√£ seed ${reservations.length} reservations`, 'success');
                }

                log('\nüéâ HO√ÄN TH√ÄNH! ƒê√£ seed d·ªØ li·ªáu v√†o Firestore:', 'success');
                log(`- ${customers.length} customers`, 'info');
                log(`- ${menuItems.length} menu items`, 'info');
                log('- 3 reservations', 'info');
                log('\nüëâ V√†o app Flutter ƒë·ªÉ xem d·ªØ li·ªáu!', 'info');
                log(`üí° L∆∞u √Ω: M√†n h√¨nh "L·ªãch s·ª≠" s·∫Ω hi·ªÉn th·ªã reservations c·ªßa customerId: ${customerIds[0]}`, 'warning');

            } catch (error) {
                log(`‚ùå L·ªói: ${error.message}`, 'error');
                console.error(error);
            } finally {
                btn.disabled = false;
                btn.textContent = 'üå± Seed D·ªØ Li·ªáu';
            }
        }
    </script>
</body>
</html>
